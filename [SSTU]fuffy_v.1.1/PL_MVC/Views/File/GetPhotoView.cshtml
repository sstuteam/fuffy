@model PL_MVC.Models.Photo
@{
    ViewBag.Title = Model.Name;
    Layout = "~/Views/Shared/_NewLayout.cshtml";
}
@section profileJS{
    <script src="~/Scripts/profile.js"></script>
}

@section GetPhotoViewStyle{
    <link href="~/Content/GetPhotoViewStyle.css" rel="stylesheet" />
}
<div class="preference">@ViewBag.Prf</div>
<div class="main">
    <div class="row">
        <div class="col-md-8 to-center">
            <h4>@Model.Name</h4>
            <img src="@Url.Action("GetPhoto", "File", new { idPhoto = Model.IDPhoto })" />
        </div>
        <div class="col-md-4 photo-info">
            <div class="row">
                Album: @ViewBag.AlbumName
            </div>
            <div class="row specification">
                Category: @Model.Category
            </div>
            <div class="row specification">
                Specification: @Model.Spetification
            </div>
            @if (ViewBag.UserId != ViewBag.UserIdFromAlbum)
            {
                <div class="row">
                    Author:<a href="@Url.Action("GetOtherUserPage","People", new { idOtherUser = ViewBag.UserIdFromAlbum })">@ViewBag.UserName</a>
                </div>
            }
            <div class="row likes">
                Likes:
                <span id="CountLike"> @Html.Action("GetLikesForPhoto", "Like", new { id = Model.IDPhoto })</span>


                <div class="add-like">
                    @using (Html.BeginForm("AddLikePhoto", "Like", new { idPhoto = Model.IDPhoto }))
                    {
                        <button id="like" type="submit" data-href="@Url.Action("AddLikePhoto", "Like", new { idPhoto = Model.IDPhoto } )"><span class="glyphicon glyphicon-thumbs-up"></span></button>
                    }
                </div>
                <br>
            </div>
            @if (ViewBag.UserId == ViewBag.UserIdFromAlbum)
            { <div class="row active">
                <a id="delete-photo" href="@Url.Action("DeletePhoto", "File", new { idPhoto = Model.IDPhoto })">Delete photo</a>
            </div>
            <div>
                <a href="@Url.Action("EditPhoto", "File", new { idPhoto = Model.IDPhoto })">Edit photo</a>
            </div>
            }
        </div>
    </div>

    <div class="row comments">
        Comments:

        @Html.Action("GetComment", "Comment", new { id = Model.IDPhoto })
        <div class="col-md-2"> </div>

    </div>
    @*@if (ViewBag.userRoleId != 0)
        {*@
    <div class="row add-new-comment"><div class="col-md-6 col-md-offset-3 for-comment">
    @using (@Html.BeginForm("AddComment", "Comment", new { IDPhoto = Model.IDPhoto }, FormMethod.Post))
    {
        <div>
        <textarea name="text" class="text-comment"></textarea></div>
        <button id="add-comment" type="submit" data-href="@Url.Action("AddComment", "Comment", new { idPhoto = Model.IDPhoto } )">Send!</button>

    }
</div>

    </div>
    @*}*@
</div>

<script id="commentTemplate" type="text/template">
    <div class="comment">
         <div class="comment-author">
            <b><a href="/People/GetOtherUserPage?idOtherUser=<%- UserId %>">culture</a></b>
            <%-Date %>
        </div>
         <div class="comment-text">
            <%-Text %>
        </div>
        <div class="comment-edit">
            <a href="/Comment/EditComment?commentId=<%- CommentId %>">Edit</a>
        </div>
        <div class="comment-edit">
            <a href="/Comment/DeleteComment?commentId= <%- CommentId %>" id="delete-comment">DeleteComment</a>
        </div>
    </div>
</script>